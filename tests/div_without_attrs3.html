<html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    
    <title>Beautiful Soup Documentation &mdash; Beautiful Soup v4.0.0 documentation</title>
    <link type="text/css" href="_static/default.css" rel="stylesheet">
    <link type="text/css" href="_static/pygments.css" rel="stylesheet">
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script src="_static/jquery.js" type="text/javascript"></script>
    <script src="_static/underscore.js" type="text/javascript"></script>
    <script src="_static/doctools.js" type="text/javascript"></script>
    <link href="#" title="Beautiful Soup v4.0.0 documentation" rel="top"> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li style="margin-right: 10px" class="right">
          <a accesskey="I" title="General Index" href="genindex.html">index</a></li>
        <li><a href="#">Beautiful Soup v4.0.0 documentation</a> »</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div id="beautiful-soup-documentation" class="section">
<h1>Beautiful Soup Documentation<a title="Permalink to this headline" href="#beautiful-soup-documentation" class="headerlink">¶</a></h1>
<img src="_images/6.1.jpg" class="align-right" alt="&quot;The Fish-Footman began by producing from under his arm a great letter, nearly as large as himself.&quot;">
<p><a href="http://www.crummy.com/software/BeautifulSoup/" class="reference external">Beautiful Soup</a> is a
Python library for pulling data out of HTML and XML files. It works
with your favorite parser to provide idiomatic ways of navigating,
searching, and modifying the parse tree. It commonly saves programmers
hours or days of work.</p>
<p>These instructions illustrate all major features of Beautiful Soup 4,
with examples. I show you what the library is good for, how it works,
how to use it, how to make it do what you want, and what to do when it
violates your expectations.</p>
<p>The examples in this documentation should work the same way in Python
2.7 and Python 3.2.</p>
<p>You might be looking for the documentation for <a href="http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html" class="reference external">Beautiful Soup 3</a>. If
you want to learn about the differences between Beautiful Soup 3 and
Beautiful Soup 4, see <a href="#porting-code-to-bs4" class="reference external">Porting code to BS4</a>.</p>
<div id="getting-help" class="section">
<h2>Getting help<a title="Permalink to this headline" href="#getting-help" class="headerlink">¶</a></h2>
<p>If you have questions about Beautiful Soup, or run into problems,
<a href="http://groups.google.com/group/beautifulsoup/" class="reference external">send mail to the discussion group</a>.</p>
</div>
</div>
<div id="quick-start" class="section">
<h1>Quick Start<a title="Permalink to this headline" href="#quick-start" class="headerlink">¶</a></h1>
<p>Here’s an HTML document I’ll be using as an example throughout this
document. It’s part of a story from <cite>Alice in Wonderland</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">html_doc</span> <span class="o">=</span> <span class="s">"""</span>
<span class="s">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span>

<span class="s">&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span>

<span class="s">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span>
<span class="s">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;,</span>
<span class="s">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span>
<span class="s">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span>
<span class="s">and they lived at the bottom of a well.&lt;/p&gt;</span>

<span class="s">&lt;p class="story"&gt;...&lt;/p&gt;</span>
<span class="s">"""</span>
</pre></div>
</div>
<p>Running the “three sisters” document through Beautiful Soup gives us a
<tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> object, which represents the document as a nested
data structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_doc</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>
<span class="c"># &lt;html&gt;</span>
<span class="c">#  &lt;head&gt;</span>
<span class="c">#   &lt;title&gt;</span>
<span class="c">#    The Dormouse's story</span>
<span class="c">#   &lt;/title&gt;</span>
<span class="c">#  &lt;/head&gt;</span>
<span class="c">#  &lt;body&gt;</span>
<span class="c">#   &lt;p class="title"&gt;</span>
<span class="c">#    &lt;b&gt;</span>
<span class="c">#     The Dormouse's story</span>
<span class="c">#    &lt;/b&gt;</span>
<span class="c">#   &lt;/p&gt;</span>
<span class="c">#   &lt;p class="story"&gt;</span>
<span class="c">#    Once upon a time there were three little sisters; and their names were</span>
<span class="c">#    &lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;</span>
<span class="c">#     Elsie</span>
<span class="c">#    &lt;/a&gt;</span>
<span class="c">#    ,</span>
<span class="c">#    &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;</span>
<span class="c">#     Lacie</span>
<span class="c">#    &lt;/a&gt;</span>
<span class="c">#    and</span>
<span class="c">#    &lt;a class="sister" href="http://example.com/tillie" id="link2"&gt;</span>
<span class="c">#     Tillie</span>
<span class="c">#    &lt;/a&gt;</span>
<span class="c">#    ; and they lived at the bottom of a well.</span>
<span class="c">#   &lt;/p&gt;</span>
<span class="c">#   &lt;p class="story"&gt;</span>
<span class="c">#    ...</span>
<span class="c">#   &lt;/p&gt;</span>
<span class="c">#  &lt;/body&gt;</span>
<span class="c"># &lt;/html&gt;</span>
</pre></div>
</div>
<p>Here are some simple ways to navigate that data structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">soup</span><span class="o">.</span><span class="n">title</span>
<span class="c"># &lt;title&gt;The Dormouse's story&lt;/title&gt;</span>

<span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">name</span>
<span class="c"># u'title'</span>

<span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">string</span>
<span class="c"># u'The Dormouse's story'</span>

<span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
<span class="c"># u'head'</span>

<span class="n">soup</span><span class="o">.</span><span class="n">p</span>
<span class="c"># &lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span>

<span class="n">soup</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="s">'class'</span><span class="p">]</span>
<span class="c"># u'title'</span>

<span class="n">soup</span><span class="o">.</span><span class="n">a</span>
<span class="c"># &lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;</span>

<span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'a'</span><span class="p">)</span>
<span class="c"># [&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,</span>
<span class="c">#  &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;,</span>
<span class="c">#  &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]</span>

<span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">"link3"</span><span class="p">)</span>
<span class="c"># &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;</span>
</pre></div>
</div>
<p>One common task is extracting all the URLs found within a page’s &lt;a&gt; tags:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'a'</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'href'</span><span class="p">))</span>
<span class="c"># http://example.com/elsie</span>
<span class="c"># http://example.com/lacie</span>
<span class="c"># http://example.com/tillie</span>
</pre></div>
</div>
<p>Another common task is extracting all the text from a page:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
<span class="c"># The Dormouse's story</span>
<span class="c">#</span>
<span class="c"># The Dormouse's story</span>
<span class="c">#</span>
<span class="c"># Once upon a time there were three little sisters; and their names were</span>
<span class="c"># Elsie,</span>
<span class="c"># Lacie and</span>
<span class="c"># Tillie;</span>
<span class="c"># and they lived at the bottom of a well.</span>
<span class="c">#</span>
<span class="c"># ...</span>
</pre></div>
</div>
<p>Does this look like what you need? If so, read on.</p>
</div>
<div id="installing-beautiful-soup" class="section">
<h1>Installing Beautiful Soup<a title="Permalink to this headline" href="#installing-beautiful-soup" class="headerlink">¶</a></h1>
<p>Beautiful Soup 4 is published through PyPi, so you can install it with
<tt class="docutils literal"><span class="pre">easy_install</span></tt> or <tt class="docutils literal"><span class="pre">pip</span></tt>. The package name is <tt class="docutils literal"><span class="pre">beautifulsoup4</span></tt>,
and the same package works on Python 2 and Python 3.</p>
<p><tt class="kbd docutils literal"><span class="pre">$</span> <span class="pre">easy_install</span> <span class="pre">beautifulsoup4</span></tt></p>
<p><tt class="kbd docutils literal"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">beautifulsoup4</span></tt></p>
<p>(The <tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> package is probably <cite>not</cite> what you want. That’s
the previous major release, <a href="http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html" class="reference external">Beautiful Soup 3</a>. Lots of software uses
BS3, so it’s still available, but if you’re writing new code you
should install <tt class="docutils literal"><span class="pre">beautifulsoup4</span></tt>.)</p>
<p>You can also <a href="http://www.crummy.com/software/BeautifulSoup/download/4.x/" class="reference external">download the Beautiful Soup 4 source tarball</a> and
install it with <tt class="docutils literal"><span class="pre">setup.py</span></tt>. The license for Beautiful Soup allows
you to package the entire library with your application, allowing you
to copy the <tt class="docutils literal"><span class="pre">bs4</span></tt> directory into your application’s codebase.</p>
<p>I use Python 2.7 and Python 3.2 to develop Beautiful Soup, but it
should work with other recent versions.</p>
<div id="be-sure-to-install-a-good-parser" class="section">
<span id="parser-installation"></span><h2>Be sure to install a good parser!<a title="Permalink to this headline" href="#be-sure-to-install-a-good-parser" class="headerlink">¶</a></h2>
<p>Beautiful Soup uses a plugin system that supports a number of popular
Python parsers. If no third-party parsers are installed, Beautiful
Soup uses the HTML parser that comes with Python. In recent releases
of Python (2.7.3 and 3.2.2), this parser is excellent at handling bad
HTML. Unfortunately, in older releases, it’s not very good at all.</p>
<p>Even if you’re using a recent release of Python, I recommend you
install the <a href="http://lxml.de/" class="reference external">lxml parser</a> if you can. Its
reliability is good on both HTML and XML, and it’s much faster than
Python’s built-in parser. Beautiful Soup will detect that you have
lxml installed, and use it instead of Python’s built-in parser.</p>
<p>Depending on your setup, you might install lxml with one of these commands:</p>
<p><tt class="kbd docutils literal"><span class="pre">$</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">python-lxml</span></tt></p>
<p><tt class="kbd docutils literal"><span class="pre">$</span> <span class="pre">easy_install</span> <span class="pre">lxml</span></tt></p>
<p><tt class="kbd docutils literal"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">lxml</span></tt></p>
<p>If you’re using Python 2, another alternative is the pure-Python
<a href="http://code.google.com/p/html5lib/" class="reference external">html5lib parser</a>, which parses
HTML the way a web browser does. Depending on your setup, you might
install html5lib with one of these commands:</p>
<p><tt class="kbd docutils literal"><span class="pre">$</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">python-html5lib</span></tt></p>
<p><tt class="kbd docutils literal"><span class="pre">$</span> <span class="pre">easy_install</span> <span class="pre">html5lib</span></tt></p>
<p><tt class="kbd docutils literal"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">html5lib</span></tt></p>
</div>
</div>

<div id="kinds-of-objects" class="section">
<h1>Kinds of objects<a title="Permalink to this headline" href="#kinds-of-objects" class="headerlink">¶</a></h1>
<p>Beautiful Soup transforms a complex HTML document into a complex tree
of Python objects. But you’ll only ever have to deal with about four
<cite>kinds</cite> of objects.</p>
<div id="tag" class="section">
<span id="id1"></span><h2><tt class="docutils literal"><span class="pre">Tag</span></tt><a title="Permalink to this headline" href="#tag" class="headerlink">¶</a></h2>
<p>A <tt class="docutils literal"><span class="pre">Tag</span></tt> object corresponds to an XML or HTML tag in the original document:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">'&lt;b class="boldest"&gt;Extremely bold&lt;/b&gt;'</span><span class="p">)</span>
<span class="n">tag</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">b</span>
<span class="nb">type</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
<span class="c"># &lt;class 'bs4.element.Tag'&gt;</span>
</pre></div>
</div>
<p>Tags have a lot of attributes and methods, and I’ll cover most of them
in <a href="#navigating-the-tree" class="reference external">Navigating the tree</a> and <a href="#searching-the-tree" class="reference external">Searching the tree</a>. For now, the most
important features of a tag are its name and attributes.</p>
<div id="name" class="section">
<h3>Name<a title="Permalink to this headline" href="#name" class="headerlink">¶</a></h3>
<p>Every tag has a name, accessible as <tt class="docutils literal"><span class="pre">.name</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tag</span><span class="o">.</span><span class="n">name</span>
<span class="c"># u'b'</span>
</pre></div>
</div>
<p>If you change a tag’s name, the change will be reflected in any HTML
markup generated by Beautiful Soup:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"blockquote"</span>
<span class="n">tag</span>
<span class="c"># &lt;blockquote class="boldest"&gt;Extremely bold&lt;/blockquote&gt;</span>
</pre></div>
</div>
</div>
<div id="attributes" class="section">
<h3>Attributes<a title="Permalink to this headline" href="#attributes" class="headerlink">¶</a></h3>
<p>A tag may have any number of attributes. The tag <tt class="docutils literal"><span class="pre">&lt;b</span>
<span class="pre">class="boldest"&gt;</span></tt> has an attribute “class” whose value is
“boldest”. You can access a tag’s attributes by treating the tag like
a dictionary:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tag</span><span class="p">[</span><span class="s">'class'</span><span class="p">]</span>
<span class="c"># u'boldest'</span>
</pre></div>
</div>
<p>You can access that dictionary directly as <tt class="docutils literal"><span class="pre">.attrs</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tag</span><span class="o">.</span><span class="n">attrs</span>
<span class="c"># {u'class': u'boldest'}</span>
</pre></div>
</div>
<p>You can add, remove, and modify a tag’s attributes. Again, this is
done by treating the tag as a dictionary:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tag</span><span class="p">[</span><span class="s">'class'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'verybold'</span>
<span class="n">tag</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">tag</span>
<span class="c"># &lt;blockquote class="verybold" id="1"&gt;Extremely bold&lt;/blockquote&gt;</span>

<span class="k">del</span> <span class="n">tag</span><span class="p">[</span><span class="s">'class'</span><span class="p">]</span>
<span class="k">del</span> <span class="n">tag</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
<span class="n">tag</span>
<span class="c"># &lt;blockquote&gt;Extremely bold&lt;/blockquote&gt;</span>
</pre></div>
</div>
<div id="multi-valued-attributes" class="section">
<span id="multivalue"></span><h4>Multi-valued attributes<a title="Permalink to this headline" href="#multi-valued-attributes" class="headerlink">¶</a></h4>
<p>HTML 4 defines a few attributes that can have multiple values. HTML 5
removes a couple of them, but defines a few more. The most common
multi-valued attribute is <tt class="docutils literal"><span class="pre">class</span></tt> (that is, a tag can have more than
one CSS class). Others include <tt class="docutils literal"><span class="pre">rel</span></tt>, <tt class="docutils literal"><span class="pre">rev</span></tt>, <tt class="docutils literal"><span class="pre">accept-charset</span></tt>,
<tt class="docutils literal"><span class="pre">headers</span></tt>, and <tt class="docutils literal"><span class="pre">accesskey</span></tt>. Beautiful Soup presents the value(s)
of a multi-valued attribute as a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">css_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">'&lt;p class="body strikeout"&gt;&lt;/p&gt;'</span><span class="p">)</span>
<span class="n">css_soup</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="s">'class'</span><span class="p">]</span>
<span class="c"># ["body", "strikeout"]</span>

<span class="n">css_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">'&lt;p class="body"&gt;&lt;/p&gt;'</span><span class="p">)</span>
<span class="n">css_soup</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="s">'class'</span><span class="p">]</span>
<span class="c"># ["body"]</span>
</pre></div>
</div>
<p>If an attribute <cite>looks</cite> like it has more than one value, but it’s not
a multi-valued attribute as defined by any version of the HTML
standard, Beautiful Soup will leave the attribute alone:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">id_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">'&lt;p id="my id"&gt;&lt;/p&gt;'</span><span class="p">)</span>
<span class="n">id_soup</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
<span class="c"># 'my id'</span>
</pre></div>
</div>
<p>When you turn a tag back into a string, multiple attribute values are
consolidated:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rel_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">'&lt;p&gt;Back to the &lt;a rel="index"&gt;homepage&lt;/a&gt;&lt;/p&gt;'</span><span class="p">)</span>
<span class="n">rel_soup</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s">'rel'</span><span class="p">]</span>
<span class="c"># ['index']</span>
<span class="n">rel_soup</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s">'rel'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">'index'</span><span class="p">,</span> <span class="s">'contents'</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">rel_soup</span><span class="o">.</span><span class="n">p</span><span class="p">)</span>
<span class="c"># &lt;p&gt;Back to the &lt;a rel="index contents"&gt;homepage&lt;/a&gt;&lt;/p&gt;</span>
</pre></div>
</div>
<p>If you parse a document as XML, there are no multi-valued attributes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">xml_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">'&lt;p class="body strikeout"&gt;&lt;/p&gt;'</span><span class="p">,</span> <span class="s">'xml'</span><span class="p">)</span>
<span class="n">xml_soup</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="s">'class'</span><span class="p">]</span>
<span class="c"># u'body strikeout'</span>
</pre></div>
</div>
</div>
</div>
</div>
<div id="navigablestring" class="section">
<h2><tt class="docutils literal"><span class="pre">NavigableString</span></tt><a title="Permalink to this headline" href="#navigablestring" class="headerlink">¶</a></h2>
<p>A string corresponds to a bit of text within a tag. Beautiful Soup
defines the <tt class="docutils literal"><span class="pre">NavigableString</span></tt> class to contain these bits of text:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tag</span><span class="o">.</span><span class="n">string</span>
<span class="c"># u'Extremely bold'</span>
<span class="nb">type</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">string</span><span class="p">)</span>
<span class="c"># &lt;class 'bs4.element.NavigableString'&gt;</span>
</pre></div>
</div>
<p>A <tt class="docutils literal"><span class="pre">NavigableString</span></tt> is just like a Python Unicode string, except
that it also supports some of the features described in <a href="#navigating-the-tree" class="reference external">Navigating
the tree</a> and <a href="#searching-the-tree" class="reference external">Searching the tree</a>. You can convert a
<tt class="docutils literal"><span class="pre">NavigableString</span></tt> to a Unicode string with <tt class="docutils literal"><span class="pre">unicode()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">unicode_string</span> <span class="o">=</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">string</span><span class="p">)</span>
<span class="n">unicode_string</span>
<span class="c"># u'Extremely bold'</span>
<span class="nb">type</span><span class="p">(</span><span class="n">unicode_string</span><span class="p">)</span>
<span class="c"># &lt;type 'unicode'&gt;</span>
</pre></div>
</div>
<p>You can’t edit a string in place, but you can replace one string with
another, using <a href="#replace-with" class="reference internal"><em>replace_with()</em></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tag</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">replace_with</span><span class="p">(</span><span class="s">"No longer bold"</span><span class="p">)</span>
<span class="n">tag</span>
<span class="c"># &lt;blockquote&gt;No longer bold&lt;/blockquote&gt;</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">NavigableString</span></tt> supports most of the features described in
<a href="#navigating-the-tree" class="reference external">Navigating the tree</a> and <a href="#searching-the-tree" class="reference external">Searching the tree</a>, but not all of
them. In particular, since a string can’t contain anything (the way a
tag may contain a string or another tag), strings don’t support the
<tt class="docutils literal"><span class="pre">.contents</span></tt> or <tt class="docutils literal"><span class="pre">.string</span></tt> attributes, or the <cite>find()</cite> method.</p>
</div>
<div id="beautifulsoup" class="section">
<h2><tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt><a title="Permalink to this headline" href="#beautifulsoup" class="headerlink">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> object itself represents the document as a
whole. For most purposes, you can treat it as a <a href="#tag" class="reference internal"><em>Tag</em></a>
object. This means it supports most of the methods described in
<a href="#navigating-the-tree" class="reference external">Navigating the tree</a> and <a href="#searching-the-tree" class="reference external">Searching the tree</a>.</p>
<p>Since the <tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> object doesn’t correspond to an actual
HTML or XML tag, it has no name and no attributes. But sometimes it’s
useful to look at its <tt class="docutils literal"><span class="pre">.name</span></tt>, so it’s been given the special
<tt class="docutils literal"><span class="pre">.name</span></tt> “[document]”:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">soup</span><span class="o">.</span><span class="n">name</span>
<span class="c"># u'[document]'</span>
</pre></div>
</div>
</div>
<div id="comments-and-other-special-strings" class="section">
<h2>Comments and other special strings<a title="Permalink to this headline" href="#comments-and-other-special-strings" class="headerlink">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">Tag</span></tt>, <tt class="docutils literal"><span class="pre">NavigableString</span></tt>, and <tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> cover almost
everything you’ll see in an HTML or XML file, but there are a few
leftover bits. The only one you’ll probably ever need to worry about
is the comment:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">markup</span> <span class="o">=</span> <span class="s">"&lt;b&gt;&lt;!--Hey, buddy. Want to buy a used parser?--&gt;&lt;/b&gt;"</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span>
<span class="n">comment</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">string</span>
<span class="nb">type</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
<span class="c"># &lt;class 'bs4.element.Comment'&gt;</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">Comment</span></tt> object is just a special type of <tt class="docutils literal"><span class="pre">NavigableString</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">comment</span>
<span class="c"># u'Hey, buddy. Want to buy a used parser'</span>
</pre></div>
</div>
<p>But when it appears as part of an HTML document, a <tt class="docutils literal"><span class="pre">Comment</span></tt> is
displayed with special formatting:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>
<span class="c"># &lt;b&gt;</span>
<span class="c">#  &lt;!--Hey, buddy. Want to buy a used parser?--&gt;</span>
<span class="c"># &lt;/b&gt;</span>
</pre></div>
</div>
<p>Beautiful Soup defines classes for anything else that might show up in
an XML document: <tt class="docutils literal"><span class="pre">CData</span></tt>, <tt class="docutils literal"><span class="pre">ProcessingInstruction</span></tt>,
<tt class="docutils literal"><span class="pre">Declaration</span></tt>, and <tt class="docutils literal"><span class="pre">Doctype</span></tt>. Just like <tt class="docutils literal"><span class="pre">Comment</span></tt>, these classes
are subclasses of <tt class="docutils literal"><span class="pre">NavigableString</span></tt> that add something extra to the
string. Here’s an example that replaces the comment with a CDATA
block:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">CData</span>
<span class="n">cdata</span> <span class="o">=</span> <span class="n">CData</span><span class="p">(</span><span class="s">"A CDATA block"</span><span class="p">)</span>
<span class="n">comment</span><span class="o">.</span><span class="n">replace_with</span><span class="p">(</span><span class="n">cdata</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>
<span class="c"># &lt;b&gt;</span>
<span class="c">#  &lt;![CDATA[A CDATA block]]&gt;</span>
<span class="c"># &lt;/b&gt;</span>
</pre></div>
</div>
</div>
</div>




<div id="choosing-a-parser" class="section">
<h1>Choosing a parser<a title="Permalink to this headline" href="#choosing-a-parser" class="headerlink">¶</a></h1>
<p>If you just need to parse some HTML, you can dump the markup into the
<tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> constructor, and it’ll probably be fine. Beautiful
Soup will pick a parser for you and parse the data. But there are a
few additional arguments you can pass in to the constructor to change
which parser is used.</p>
<p>The first argument to the <tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> constructor is a string or
an open filehandle&ndash;the markup you want parsed. The second argument is
<cite>how</cite> you’d like the markup parsed.</p>
<p>If you don’t specify anything, you’ll get the best HTML parser that’s
installed. Beautiful Soup ranks lxml’s parser as being the best, then
html5lib’s, then Python’s built-in parser. You can override this by
specifying one of the following:</p>
<ul class="simple">
<li>What type of markup you want to parse. Currently supported are
“html”, “xml”, and “html5”.</li>
<li>The name of the parser library you want to use. Currently supported
options are “lxml”, “html5lib”, and “html.parser” (Python’s
built-in HTML parser).</li>
</ul>
<p>Some examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="s">"lxml"</span><span class="p">)</span>
<span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="s">"xml"</span><span class="p">)</span>
<span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="s">"html5"</span><span class="p">)</span>
</pre></div>
</div>
<p>You can specify a list of the parser features you want, instead of
just one. Right now this is mostly useful for distinguishing between
lxml’s HTML parser and its XML parser:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="p">[</span><span class="s">"html"</span><span class="p">,</span> <span class="s">"lxml"</span><span class="p">])</span>
<span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="p">[</span><span class="s">"xml"</span><span class="p">,</span> <span class="s">"lxml"</span><span class="p">])</span>
</pre></div>
</div>
<p>If you don’t have an appropriate parser installed, Beautiful Soup will
ignore your request and pick a different parser. For instance, right
now the only supported XML parser is lxml, so if you don’t have lxml
installed, asking for an XML parser won’t give you one, and asking for
“lxml” won’t work either.</p>
<p>Why would you use one parser over another? Because different parsers
will create different parse trees from the same document. The biggest
differences are between HTML parsers and XML parsers. Here’s a short
document, parsed as HTML:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">"&lt;a&gt;&lt;b /&gt;&lt;/a&gt;"</span><span class="p">)</span>
<span class="c"># &lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;a&gt;&lt;b&gt;&lt;/b&gt;&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;</span>
</pre></div>
</div>
<p>Since an empty &lt;b /&gt; tag is not valid HTML, the parser turns it into a
&lt;b&gt;&lt;/b&gt; tag pair.</p>
<p>Here’s the same document parsed as XML (running this requires that you
have lxml installed). Note that the empty &lt;b /&gt; tag is left alone, and
that the document is given an XML declaration instead of being put
into an &lt;html&gt; tag.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">"&lt;a&gt;&lt;b /&gt;&lt;/a&gt;"</span><span class="p">,</span> <span class="s">"xml"</span><span class="p">)</span>
<span class="c"># &lt;?xml version="1.0" encoding="utf-8"&gt;</span>
<span class="c"># &lt;a&gt;&lt;b /&gt;&lt;/a&gt;</span>
</pre></div>
</div>
<p>There are also differences between HTML parsers. If you give Beautiful
Soup a perfectly-formed HTML document, these differences won’t
matter. One parser may be faster than another, but they’ll all give
you a data structure that looks exactly like the original HTML
document.</p>
<p>But if the document is not perfectly-formed, different parsers will
give different results. Here’s a short, invalid document parsed using
lxml’s HTML parser. Note that the dangling &lt;/p&gt; tag is simply
ignored:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">"&lt;a&gt;&lt;/p&gt;"</span><span class="p">,</span> <span class="s">"lxml"</span><span class="p">)</span>
<span class="c"># &lt;html&gt;&lt;body&gt;&lt;a&gt;&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;</span>
</pre></div>
</div>
<p>Here’s the same document parsed using html5lib:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">"&lt;a&gt;&lt;/p&gt;"</span><span class="p">,</span> <span class="s">"html5lib"</span><span class="p">)</span>
<span class="c"># &lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;a&gt;&lt;p&gt;&lt;/p&gt;&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;</span>
</pre></div>
</div>
<p>Instead of ignoring the dangling &lt;/p&gt; tag, html5lib pairs it with an
opening &lt;p&gt; tag. This parser also adds an empty &lt;head&gt; tag to the
document.</p>
<p>Here’s the same document parsed with Python’s built-in HTML
parser:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BeautifulSoup</span><span class="p">(</span><span class="s">"&lt;a&gt;&lt;/p&gt;"</span><span class="p">,</span> <span class="s">"html.parser"</span><span class="p">)</span>
<span class="c"># &lt;a&gt;&lt;/a&gt;</span>
</pre></div>
</div>
<p>Like html5lib, this parser ignores the closing &lt;/p&gt; tag. Unlike
html5lib, this parser makes no attempt to create a well-formed HTML
document by adding a &lt;body&gt; tag. Unlike lxml, it doesn’t even bother
to add an &lt;html&gt; tag.</p>
<p>Since the document “&lt;a&gt;&lt;/p&gt;” is invalid, none of these techniques is
the “correct” way to handle it. The html5lib parser uses techniques
that are part of the HTML5 standard, so it has the best claim on being
the “correct” way, but all three techniques are leigtimate.</p>
<p>Differences between parsers can affect your script. If you’re planning
on distributing your script to other people, you might want to specify
in the <tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> constructor which parser you used during
development. That will reduce the chances that your users parse a
document differently from the way you parse it.</p>
</div>



<div id="id10" class="section">
<h1>Beautiful Soup 3<a title="Permalink to this headline" href="#id10" class="headerlink">¶</a></h1>
<p>Beautiful Soup 3.2.0 is the old version, the last release of the
Beautiful Soup 3 series. It’s currently the version packaged with all
major Linux distributions:</p>
<div class="highlight-python"><pre>:kbd:`$ apt-get install python-beautifulsoup`</pre>
</div>
<p>It’s also published through PyPi as <cite>BeautifulSoup</cite>.:</p>
<div class="highlight-python"><pre>:kbd:`$ easy_install BeautifulSoup`</pre>
</div>
<p><tt class="kbd docutils literal"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">BeautifulSoup</span></tt></p>
<p>You can also <a href="http://www.crummy.com/software/BeautifulSoup/bs3/download/3.x/BeautifulSoup-3.2.0.tar.gz" class="reference external">download a tarball of Beautiful Soup 3.2.0</a>.</p>
<p>If you ran <tt class="docutils literal"><span class="pre">easy_install</span> <span class="pre">beautifulsoup</span></tt> or <tt class="docutils literal"><span class="pre">easy_install</span>
<span class="pre">BeautifulSoup</span></tt>, but your code doesn’t work, you installed Beautiful
Soup 3 by mistake. You need to run <tt class="docutils literal"><span class="pre">easy_install</span> <span class="pre">beautifulsoup4</span></tt>.</p>
<p><a href="http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html" class="reference external">The documentation for Beautiful Soup 3 is archived online</a>. If
your first language is Chinese, it might be easier for you to read
<a href="http://www.crummy.com/software/BeautifulSoup/bs3/documentation.zh.html" class="reference external">the Chinese translation of the Beautiful Soup 3 documentation</a>,
then read this document to find out about the changes made in
Beautiful Soup 4.</p>
<div id="porting-code-to-bs4" class="section">
<h2>Porting code to BS4<a title="Permalink to this headline" href="#porting-code-to-bs4" class="headerlink">¶</a></h2>
<p>Most code written against Beautiful Soup 3 will work against Beautiful
Soup 4 with one simple change. All you should have to do is change the
package name from <tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> to <tt class="docutils literal"><span class="pre">bs4</span></tt>. So this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">BeautifulSoup</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</pre></div>
</div>
<p>becomes this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</pre></div>
</div>
<ul class="simple">
<li>If you get the <tt class="docutils literal"><span class="pre">ImportError</span></tt> “No module named BeautifulSoup”, your
problem is that you’re trying to run Beautiful Soup 3 code, but you
only have Beautiful Soup 4 installed.</li>
<li>If you get the <tt class="docutils literal"><span class="pre">ImportError</span></tt> “No module named bs4”, your problem
is that you’re trying to run Beautiful Soup 4 code, but you only
have Beautiful Soup 3 installed.</li>
</ul>
<p>Although BS4 is mostly backwards-compatible with BS3, most of its
methods have been deprecated and given new names for <a href="http://www.python.org/dev/peps/pep-0008/" class="reference external">PEP 8 compliance</a>. There are numerous other
renames and changes, and a few of them break backwards compatibility.</p>
<p>Here’s what you’ll need to know to convert your BS3 code and habits to BS4:</p>
<div id="you-need-a-parser" class="section">
<h3>You need a parser<a title="Permalink to this headline" href="#you-need-a-parser" class="headerlink">¶</a></h3>
<p>Beautiful Soup 3 used Python’s <tt class="docutils literal"><span class="pre">SGMLParser</span></tt>, a module that was
deprecated and removed in Python 3.0. Beautiful Soup 4 uses
<tt class="docutils literal"><span class="pre">html.parser</span></tt> by default, but you can plug in lxml or html5lib and
use that instead. Until <tt class="docutils literal"><span class="pre">html.parser</span></tt> is improved to handle
real-world HTML better, that’s what I recommend you do. See <a href="#be-sure-to-install-a-good-parser" class="reference external">Be sure
to install a good parser!</a></p>
</div>
<div id="method-names" class="section">
<h3>Method names<a title="Permalink to this headline" href="#method-names" class="headerlink">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">replaceWith</span></tt> -&gt; <tt class="docutils literal"><span class="pre">replace_with</span></tt></li>
<li><tt class="docutils literal"><span class="pre">replaceWithChildren</span></tt> -&gt; <tt class="docutils literal"><span class="pre">replace_with_children</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findAll</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_all</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findAllNext</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_all_next</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findAllPrevious</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_all_previous</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findNext</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_next</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findNextSibling</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_next_sibling</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findNextSiblings</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_next_siblings</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findParent</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_parent</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findParents</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_parents</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findPrevious</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_previous</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findPreviousSibling</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_previous_sibling</span></tt></li>
<li><tt class="docutils literal"><span class="pre">findPreviousSiblings</span></tt> -&gt; <tt class="docutils literal"><span class="pre">find_previous_siblings</span></tt></li>
<li><tt class="docutils literal"><span class="pre">nextSibling</span></tt> -&gt; <tt class="docutils literal"><span class="pre">next_sibling</span></tt></li>
<li><tt class="docutils literal"><span class="pre">previousSibling</span></tt> -&gt; <tt class="docutils literal"><span class="pre">previous_sibling</span></tt></li>
</ul>
<p>Some arguments to the Beautiful Soup constructor were renamed for the
same reasons:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">BeautifulSoup(parseOnlyThese=...)</span></tt> -&gt; <tt class="docutils literal"><span class="pre">BeautifulSoup(parse_only=...)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">BeautifulSoup(fromEncoding=...)</span></tt> -&gt; <tt class="docutils literal"><span class="pre">BeautifulSoup(from_encoding=...)</span></tt></li>
</ul>
<p>I renamed one method for compatibility with Python 3:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Tag.has_key()</span></tt> -&gt; <tt class="docutils literal"><span class="pre">Tag.has_attr()</span></tt></li>
</ul>
<p>I renamed one attribute to use more accurate terminology:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Tag.isSelfClosing</span></tt> -&gt; <tt class="docutils literal"><span class="pre">Tag.is_empty_element</span></tt></li>
</ul>
<p>I renamed three attributes to avoid using words that have special
meaning to Python. Unlike the others, these changes are <em>not backwards
compatible.</em> If you used these attributes in BS3, your code will break
on BS4 until you change them.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">UnicodeDammit.unicode</span></tt> -&gt; <tt class="docutils literal"><span class="pre">UnicodeDammit.unicode_markup</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Tag.next</span></tt> -&gt; <tt class="docutils literal"><span class="pre">Tag.next_element</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Tag.previous</span></tt> -&gt; <tt class="docutils literal"><span class="pre">Tag.previous_element</span></tt></li>
</ul>
</div>
<div id="generators" class="section">
<h3>Generators<a title="Permalink to this headline" href="#generators" class="headerlink">¶</a></h3>
<p>I gave the generators PEP 8-compliant names, and transformed them into
properties:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">childGenerator()</span></tt> -&gt; <tt class="docutils literal"><span class="pre">children</span></tt></li>
<li><tt class="docutils literal"><span class="pre">nextGenerator()</span></tt> -&gt; <tt class="docutils literal"><span class="pre">next_elements</span></tt></li>
<li><tt class="docutils literal"><span class="pre">nextSiblingGenerator()</span></tt> -&gt; <tt class="docutils literal"><span class="pre">next_siblings</span></tt></li>
<li><tt class="docutils literal"><span class="pre">previousGenerator()</span></tt> -&gt; <tt class="docutils literal"><span class="pre">previous_elements</span></tt></li>
<li><tt class="docutils literal"><span class="pre">previousSiblingGenerator()</span></tt> -&gt; <tt class="docutils literal"><span class="pre">previous_siblings</span></tt></li>
<li><tt class="docutils literal"><span class="pre">recursiveChildGenerator()</span></tt> -&gt; <tt class="docutils literal"><span class="pre">descendants</span></tt></li>
<li><tt class="docutils literal"><span class="pre">parentGenerator()</span></tt> -&gt; <tt class="docutils literal"><span class="pre">parents</span></tt></li>
</ul>
<p>So instead of this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="n">tag</span><span class="o">.</span><span class="n">parentGenerator</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>You can write this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="n">tag</span><span class="o">.</span><span class="n">parents</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>(But the old code will still work.)</p>
<p>Some of the generators used to yield <tt class="xref docutils literal"><span class="pre">None</span></tt> after they were done, and
then stop. That was a bug. Now the generators just stop.</p>
<p>There are two new generators, <a href="#string-generators" class="reference internal"><em>.strings and
.stripped_strings</em></a>. <tt class="docutils literal"><span class="pre">.strings</span></tt> yields
NavigableString objects, and <tt class="docutils literal"><span class="pre">.stripped_strings</span></tt> yields Python
strings that have had whitespace stripped.</p>
</div>
<div id="xml" class="section">
<h3>XML<a title="Permalink to this headline" href="#xml" class="headerlink">¶</a></h3>
<p>There is no longer a <tt class="docutils literal"><span class="pre">BeautifulStoneSoup</span></tt> class for parsing XML. To
parse XML you pass in “xml” as the second argument to the
<tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> constructor. For the same reason, the
<tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> constructor no longer recognizes the <tt class="docutils literal"><span class="pre">isHTML</span></tt>
argument.</p>
<p>Beautiful Soup’s handling of empty-element XML tags has been
improved. Previously when you parsed XML you had to explicitly say
which tags were considered empty-element tags. The <tt class="docutils literal"><span class="pre">selfClosingTags</span></tt>
argument to the constructor is no longer recognized. Instead,
Beautiful Soup considers any empty tag to be an empty-element tag. If
you add a child to an empty-element tag, it stops being an
empty-element tag.</p>
</div>
<div id="entities" class="section">
<h3>Entities<a title="Permalink to this headline" href="#entities" class="headerlink">¶</a></h3>
<p>An incoming HTML or XML entity is always converted into the
corresponding Unicode character. Beautiful Soup 3 had a number of
overlapping ways of dealing with entities, which have been
removed. The <tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> constructor no longer recognizes the
<tt class="docutils literal"><span class="pre">smartQuotesTo</span></tt> or <tt class="docutils literal"><span class="pre">convertEntities</span></tt> arguments. (<a href="#unicode-dammit" class="reference external">Unicode,
Dammit</a> still has <tt class="docutils literal"><span class="pre">smart_quotes_to</span></tt>, but its default is now to turn
smart quotes into Unicode.)</p>
<p>If you want to turn those Unicode characters back into HTML entities
on output, rather than turning them into UTF-8 characters, you need to
use <tt class="docutils literal"><span class="pre">.encode</span></tt>, as described in <cite>Substituting HTML entities</cite>. This
may change before the final release.</p>
</div>
<div id="miscellaneous" class="section">
<h3>Miscellaneous<a title="Permalink to this headline" href="#miscellaneous" class="headerlink">¶</a></h3>
<p><a href="#string" class="reference internal"><em>Tag.string</em></a> now operates recursively. If tag A
contains a single tag B and nothing else, then A.string is the same as
B.string. (Previously, it was None.)</p>
<p><a href="#multi-valued-attributes" class="reference external">Multi-valued attributes</a> like <tt class="docutils literal"><span class="pre">class</span></tt> have lists of strings as
their values, not strings. This may affect the way you search by CSS
class.</p>
<p>If you pass one of the <tt class="docutils literal"><span class="pre">find*</span></tt> methods both <a href="#text" class="reference internal"><em>text</em></a> <cite>and</cite>
a tag-specific argument like <a href="#id8" class="reference internal"><em>name</em></a>, Beautiful Soup will
search for tags that match your tag-specific criteria and whose
<a href="#string" class="reference internal"><em>Tag.string</em></a> matches your value for <a href="#text" class="reference internal"><em>text</em></a>. It will <cite>not</cite> find the strings themselves. Previously,
Beautiful Soup ignored the tag-specific arguments and looked for
strings.</p>
<p>The <tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt> constructor no longer recognizes the
<cite>markupMassage</cite> argument. It’s now the parser’s responsibility to
handle markup correctly.</p>
<p>The rarely-used alternate parser classes like
<tt class="docutils literal"><span class="pre">ICantBelieveItsBeautifulSoup</span></tt> and <tt class="docutils literal"><span class="pre">BeautifulSOAP</span></tt> have been
removed. It’s now the parser’s decision how to handle ambiguous
markup.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a href="#" class="reference internal">Beautiful Soup Documentation</a><ul>
<li><a href="#getting-help" class="reference internal">Getting help</a></li>
</ul>
</li>
<li><a href="#quick-start" class="reference internal">Quick Start</a></li>
<li><a href="#installing-beautiful-soup" class="reference internal">Installing Beautiful Soup</a><ul>
<li><a href="#be-sure-to-install-a-good-parser" class="reference internal">Be sure to install a good parser!</a></li>
</ul>
</li>
<li><a href="#making-the-soup" class="reference internal">Making the soup</a></li>
<li><a href="#kinds-of-objects" class="reference internal">Kinds of objects</a><ul>
<li><a href="#tag" class="reference internal"><tt class="docutils literal"><span class="pre">Tag</span></tt></a><ul>
<li><a href="#name" class="reference internal">Name</a></li>
<li><a href="#attributes" class="reference internal">Attributes</a><ul>
<li><a href="#multi-valued-attributes" class="reference internal">Multi-valued attributes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#navigablestring" class="reference internal"><tt class="docutils literal"><span class="pre">NavigableString</span></tt></a></li>
<li><a href="#beautifulsoup" class="reference internal"><tt class="docutils literal"><span class="pre">BeautifulSoup</span></tt></a></li>
<li><a href="#comments-and-other-special-strings" class="reference internal">Comments and other special strings</a></li>
</ul>
</li>
<li><a href="#navigating-the-tree" class="reference internal">Navigating the tree</a><ul>
<li><a href="#going-down" class="reference internal">Going down</a><ul>
<li><a href="#navigating-using-tag-names" class="reference internal">Navigating using tag names</a></li>
<li><a href="#contents-and-children" class="reference internal"><tt class="docutils literal"><span class="pre">.contents</span></tt> and <tt class="docutils literal"><span class="pre">.children</span></tt></a></li>
<li><a href="#descendants" class="reference internal"><tt class="docutils literal"><span class="pre">.descendants</span></tt></a></li>
<li><a href="#string" class="reference internal"><tt class="docutils literal"><span class="pre">.string</span></tt></a></li>
<li><a href="#strings-and-stripped-strings" class="reference internal"><tt class="docutils literal"><span class="pre">.strings</span></tt> and <tt class="docutils literal"><span class="pre">stripped_strings</span></tt></a></li>
</ul>
</li>
<li><a href="#going-up" class="reference internal">Going up</a><ul>
<li><a href="#parent" class="reference internal"><tt class="docutils literal"><span class="pre">.parent</span></tt></a></li>
<li><a href="#parents" class="reference internal"><tt class="docutils literal"><span class="pre">.parents</span></tt></a></li>
</ul>
</li>
<li><a href="#going-sideways" class="reference internal">Going sideways</a><ul>
<li><a href="#next-sibling-and-previous-sibling" class="reference internal"><tt class="docutils literal"><span class="pre">.next_sibling</span></tt> and <tt class="docutils literal"><span class="pre">.previous_sibling</span></tt></a></li>
<li><a href="#next-siblings-and-previous-siblings" class="reference internal"><tt class="docutils literal"><span class="pre">.next_siblings</span></tt> and <tt class="docutils literal"><span class="pre">.previous_siblings</span></tt></a></li>
</ul>
</li>
<li><a href="#going-back-and-forth" class="reference internal">Going back and forth</a><ul>
<li><a href="#next-element-and-previous-element" class="reference internal"><tt class="docutils literal"><span class="pre">.next_element</span></tt> and <tt class="docutils literal"><span class="pre">.previous_element</span></tt></a></li>
<li><a href="#next-elements-and-previous-elements" class="reference internal"><tt class="docutils literal"><span class="pre">.next_elements</span></tt> and <tt class="docutils literal"><span class="pre">.previous_elements</span></tt></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#searching-the-tree" class="reference internal">Searching the tree</a><ul>
<li><a href="#kinds-of-filters" class="reference internal">Kinds of filters</a><ul>
<li><a href="#a-string" class="reference internal">A string</a></li>
<li><a href="#a-regular-expression" class="reference internal">A regular expression</a></li>
<li><a href="#a-list" class="reference internal">A list</a></li>
<li><a href="#true" class="reference internal"><tt class="xref docutils literal"><span class="pre">True</span></tt></a></li>
<li><a href="#a-function" class="reference internal">A function</a></li>
</ul>
</li>
<li><a href="#find-all" class="reference internal"><tt class="docutils literal"><span class="pre">find_all()</span></tt></a><ul>
<li><a href="#the-name-argument" class="reference internal">The <tt class="docutils literal"><span class="pre">name</span></tt> argument</a></li>
<li><a href="#the-keyword-arguments" class="reference internal">The keyword arguments</a></li>
<li><a href="#searching-by-css-class" class="reference internal">Searching by CSS class</a></li>
<li><a href="#the-text-argument" class="reference internal">The <tt class="docutils literal"><span class="pre">text</span></tt> argument</a></li>
<li><a href="#the-limit-argument" class="reference internal">The <tt class="docutils literal"><span class="pre">limit</span></tt> argument</a></li>
<li><a href="#the-recursive-argument" class="reference internal">The <tt class="docutils literal"><span class="pre">recursive</span></tt> argument</a></li>
</ul>
</li>
<li><a href="#calling-a-tag-is-like-calling-find-all" class="reference internal">Calling a tag is like calling <tt class="docutils literal"><span class="pre">find_all()</span></tt></a></li>
<li><a href="#find" class="reference internal"><tt class="docutils literal"><span class="pre">find()</span></tt></a></li>
<li><a href="#find-parents-and-find-parent" class="reference internal"><tt class="docutils literal"><span class="pre">find_parents()</span></tt> and <tt class="docutils literal"><span class="pre">find_parent()</span></tt></a></li>
<li><a href="#find-next-siblings-and-find-next-sibling" class="reference internal"><tt class="docutils literal"><span class="pre">find_next_siblings()</span></tt> and <tt class="docutils literal"><span class="pre">find_next_sibling()</span></tt></a></li>
<li><a href="#find-previous-siblings-and-find-previous-sibling" class="reference internal"><tt class="docutils literal"><span class="pre">find_previous_siblings()</span></tt> and <tt class="docutils literal"><span class="pre">find_previous_sibling()</span></tt></a></li>
<li><a href="#find-all-next-and-find-next" class="reference internal"><tt class="docutils literal"><span class="pre">find_all_next()</span></tt> and <tt class="docutils literal"><span class="pre">find_next()</span></tt></a></li>
<li><a href="#find-all-previous-and-find-previous" class="reference internal"><tt class="docutils literal"><span class="pre">find_all_previous()</span></tt> and <tt class="docutils literal"><span class="pre">find_previous()</span></tt></a></li>
</ul>
</li>
<li><a href="#modifying-the-tree" class="reference internal">Modifying the tree</a><ul>
<li><a href="#changing-tag-names-and-attributes" class="reference internal">Changing tag names and attributes</a></li>
<li><a href="#modifying-string" class="reference internal">Modifying <tt class="docutils literal"><span class="pre">.string</span></tt></a></li>
<li><a href="#append" class="reference internal"><tt class="docutils literal"><span class="pre">append()</span></tt></a></li>
<li><a href="#beautifulsoup-new-string-and-new-tag" class="reference internal"><tt class="docutils literal"><span class="pre">BeautifulSoup.new_string()</span></tt> and <tt class="docutils literal"><span class="pre">.new_tag()</span></tt></a></li>
<li><a href="#insert" class="reference internal"><tt class="docutils literal"><span class="pre">insert()</span></tt></a></li>
<li><a href="#insert-before-and-insert-after" class="reference internal"><tt class="docutils literal"><span class="pre">insert_before()</span></tt> and <tt class="docutils literal"><span class="pre">insert_after()</span></tt></a></li>
<li><a href="#clear" class="reference internal"><tt class="docutils literal"><span class="pre">clear()</span></tt></a></li>
<li><a href="#extract" class="reference internal"><tt class="docutils literal"><span class="pre">extract()</span></tt></a></li>
<li><a href="#decompose" class="reference internal"><tt class="docutils literal"><span class="pre">decompose()</span></tt></a></li>
<li><a href="#replace-with" class="reference internal"><tt class="docutils literal"><span class="pre">replace_with()</span></tt></a></li>
<li><a href="#replace-with-children" class="reference internal"><tt class="docutils literal"><span class="pre">replace_with_children()</span></tt></a></li>
</ul>
</li>
<li><a href="#output" class="reference internal">Output</a><ul>
<li><a href="#pretty-printing" class="reference internal">Pretty-printing</a></li>
<li><a href="#non-pretty-printing" class="reference internal">Non-pretty printing</a></li>
<li><a href="#output-formatters" class="reference internal">Output formatters</a></li>
<li><a href="#get-text" class="reference internal"><tt class="docutils literal"><span class="pre">get_text()</span></tt></a></li>
</ul>
</li>
<li><a href="#choosing-a-parser" class="reference internal">Choosing a parser</a></li>
<li><a href="#encodings" class="reference internal">Encodings</a><ul>
<li><a href="#output-encoding" class="reference internal">Output encoding</a></li>
<li><a href="#unicode-dammit" class="reference internal">Unicode, Dammit</a></li>
</ul>
</li>
<li><a href="#parsing-only-part-of-a-document" class="reference internal">Parsing only part of a document</a><ul>
<li><a href="#soupstrainer" class="reference internal"><tt class="docutils literal"><span class="pre">SoupStrainer</span></tt></a></li>
</ul>
</li>
<li><a href="#troubleshooting" class="reference internal">Troubleshooting</a><ul>
<li><a href="#parsing-xml" class="reference internal">Parsing XML</a></li>
<li><a href="#improving-performance" class="reference internal">Improving Performance</a></li>
</ul>
</li>
<li><a href="#id10" class="reference internal">Beautiful Soup 3</a><ul>
<li><a href="#porting-code-to-bs4" class="reference internal">Porting code to BS4</a><ul>
<li><a href="#you-need-a-parser" class="reference internal">You need a parser</a></li>
<li><a href="#method-names" class="reference internal">Method names</a></li>
<li><a href="#generators" class="reference internal">Generators</a></li>
<li><a href="#xml" class="reference internal">XML</a></li>
<li><a href="#entities" class="reference internal">Entities</a></li>
<li><a href="#miscellaneous" class="reference internal">Miscellaneous</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a rel="nofollow" href="_sources/index.txt">Show Source</a></li>
  </ul>
<div style="" id="searchbox">
  <h3>Quick search</h3>
    <form method="get" action="search.html" class="search">
      <input type="text" size="18" name="q">
      <input type="submit" value="Go">
      <input type="hidden" value="yes" name="check_keywords">
      <input type="hidden" value="default" name="area">
    </form>
    <p style="font-size: 90%" class="searchtip">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li style="margin-right: 10px" class="right">
          <a title="General Index" href="genindex.html">index</a></li>
        <li><a href="#">Beautiful Soup v4.0.0 documentation</a> »</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Leonard Richardson.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.1.
    </div>
  
</body></html>
